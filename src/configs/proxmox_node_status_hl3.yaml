source: proxmox
entity: node_status
schema_version: 1

collect:
  mode: single
  # --- DEFINE NODE HERE ---
  # This makes {node} available for the endpoint and base_url,
  # AND it ensures the output filename includes "hl4".
  node: hl3
  
  # Fetch the status of the node itself (CPU, RAM, Uptime, etc.)
  endpoint: "/api2/json/nodes/{node}/status"

http:
  # {node} is replaced by "hl4" automatically
  base_url: "https://{node}.d.mckaylab.me:8006"
  verify_tls: false
  timeout_seconds: 20

auth:
  mode: proxmox_token
  token_id_env: "PROXMOX_API_TOKEN_ID"
  # {NODE} is automatically available as "HL4"
  token_secret_env: "PROXMOX_API_TOKEN_SECRET_{NODE}"

storage:
  container_env: "AZURE_BLOB_CONTAINER"
  container_default: "homelab-telemetry"
  bronze_prefix: "bronze"
  system: "proxmox"
  dataset: "node_status"

schedule:
  interval_seconds: 60